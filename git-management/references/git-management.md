---
description: 代码变更后的Git管理规范，包括提交时机、流程和规范
alwaysApply: false
globs: ["*.ts", "*.tsx", "*.js", "*.jsx", "*.py", "*.md", "*.json", "*.yml", "*.yaml", "*.java", "*.go", "*.rs", "*.cpp", "*.c"]
---

# 代码变更后的Git管理

## 🚨 核心指令（必须严格执行）

**在Agent场景下，代码回滚和任务撤销更为频繁，因此必须及时提交变更以保护工作成果。**

## 🔄 触发时机（必须执行）

以下情况**必须**主动建议Git提交：
- ✅ 完成代码修改后（创建、修改、删除代码文件）
- ✅ 完成一个功能模块或任务单元后
- ✅ 用户明确表示满意当前修改时

## 📋 执行流程（不得跳过）

1. **变更总结**：简要说明本次修改的内容和目的
2. **提交建议**：主动询问用户是否需要进行Git提交
3. **建议话术**：使用友好的询问方式，例如："代码修改已完成，需要我帮你提交到Git仓库吗？这样可以方便后续回滚。"
4. **等待确认**：获得用户明确授权后再执行Git操作

**违反此规则的行为**：
- ❌ 完成代码修改后不主动建议提交
- ❌ 跳过变更总结直接提交
- ❌ 未获得授权就执行Git操作

## ✅ Git操作规范

- ✅ 提交前先总结变更内容
- ✅ 生成清晰的commit message（格式：`类型: 简短描述`）
- ✅ 仅提交当前对话中修改的文件
- ❌ 不要自动推送，推送前需用户确认
- ❌ 不要提交未授权的文件

## 📝 示例流程

```
AI: "已完成XXX功能的修改，涉及3个文件的变更。需要我帮你提交到Git吗？"
用户: "提交"
AI: "已提交，commit message: 'feat: 添加XXX功能'。需要推送到远程仓库吗？"
用户: "推送"
AI: [执行推送操作]
```
