---
name: requirement-discovery
description: 需求发现规范，适用于探索性场景，通过角色扮演帮助用户在迷茫中发现高ROI功能方向。自动触发，纯对话式启发。
---

# 需求发现规范

> 探索性发现流程，通过多角色视角分析项目，启发用户识别高ROI功能方向。

---

## ⚠️ 核心强制要求

### 自动触发条件

检测到以下信号时**必须触发**：
- 用户询问："有哪些功能？"、"应该做什么？"、"优先级？"、"下一步？"
- 用户表达迷茫、不确定的语气
- 用户要求"梳理任务"、"分析需求"、"探索方向"

### 发现流程

1. **项目分析**：快速理解项目定位、当前状态、技术栈
2. **角色扮演**：从目标用户/开发者/维护者视角分析
3. **需求生成**：列出高ROI必须实现的功能
4. **ROI评估**：按影响范围 × 实现成本排序
5. **启发输出**：对话式呈现，不生成文档

---

## AI Agent 行为要求

### 触发时执行

1. **快速分析项目**：理解项目定位、核心价值、当前状态
2. **推荐角色**：根据项目类型推荐角色（用户/开发者/维护者）
3. **角色扮演**：假设自己是目标角色，列出"必须实现的高ROI功能"
4. **ROI评估**：每个功能标注影响范围、实现成本、优先级
5. **对话式输出**：以启发式对话呈现，不生成文档

### 输出格式

```
💡 需求发现

从 [角色] 视角分析，当前项目最应该优先实现：

1. [功能名] - ROI: ⭐⭐⭐⭐⭐
   - 影响范围：[用户价值/技术价值/维护价值]
   - 实现成本：[低/中/高]
   - 优先级：P0/P1/P2

2. [功能名] - ROI: ⭐⭐⭐⭐
   ...

建议：选择功能后执行 /task-planning 进行详细规划
```

### 衔接 task-planning

用户确认功能后，提示：
```
已确认功能：[功能名]，是否执行 /task-planning 进行详细规划？
```

---

## 参考资料

- `references/trigger-signals.md` - 触发信号详细识别规则
- `references/role-play-method.md` - 角色扮演方法与实践
- `references/roi-evaluation.md` - ROI评估框架
