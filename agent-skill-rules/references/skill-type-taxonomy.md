# Skill 类型分类学：动作型 vs 约束型

> 来源：qiao-skills 实践中发现的结构性缺口。Agent Skills 官方规范隐含假设所有 skill 为动作型，本文档补充约束型 skill 的组织方式指导。

---

## 两种 skill 类型

### 动作型 skill（Procedural）

**本质**：有明确触发、有执行步骤、有可观测输出的"动作"。

**特征**：
- 由事件触发（用户指令、条件满足）
- 有线性执行流：Step 1 → 2 → 3
- 有明确的输入和可观测输出
- 执行完毕后"结束"

**正文组织方式**（沿用官方推荐）：
- Instructions（分步说明）
- Examples（输入/输出示例）
- Edge cases（边界情况）

**典型示例**：`task-planning`、`doc-driven-development`、`testing-and-diagnostics`

### 约束型 skill（Declarative）

**本质**：持续生效的规则、原则或标准，没有独立的执行流。

**特征**：
- 始终生效，作为背景约束
- 并行检查：每个决策点都要对照
- 没有独立输出，体现在其他动作的质量上
- 不存在"执行完毕"的概念

**正文组织方式**（本文档新增）：
- 核心原则（必须遵守的底线规则）
- 行为要求（在具体场景下的行为规范）
- 判断标准（如何判断是否违反原则，含对照表）
- 反模式（必须避免的行为，含具体示例）

**典型示例**：`ai-collaboration-principles`、`single-responsibility`、`python-coding-standards`

### 混合型 skill

部分 skill 兼具两种特征：有明确触发条件和步骤，但也包含持续性约束。

**判断方法**：看 skill 的核心价值是"执行一个流程"还是"维持一种状态"。

- `critical-thinking-guidance`：有触发和步骤（暂停 → 引导 → 等待 → 回答），但核心是约束性的（保护用户认知能力）。偏约束型，步骤只是约束的实施手段。
- `doc-driven-development`：有持续性原则（先查文档再写代码），但核心是动作流程（识别问题 → 查文档 → 基于文档实现）。偏动作型，原则只是触发条件。

**混合型处理建议**：识别主导类型，按主导类型组织正文，将次要类型的内容作为补充段落。

---

## 对 frontmatter 的影响

### description 写法差异

| 类型 | description 模式 | 示例 |
|------|-----------------|------|
| 动作型 | "做什么 + 何时触发" | "任务规划规范，适用于复杂任务（≥3步）..." |
| 约束型 | "约束什么 + 适用范围" | "AI协作总原则，规范 Agent 的协作行为...适用于所有 AI Agent 交互场景" |

### 建议标注类型（可选）

通过 metadata 字段标注 skill 类型，便于管理和检索：

```yaml
metadata:
  type: procedural   # 动作型
```

```yaml
metadata:
  type: declarative   # 约束型
```

不强制，但在 skill 数量增长后有助于分类管理。

---

## 正文组织方式对照

### 动作型正文模板

```markdown
## ⚠️ 核心强制要求
### 触发条件
- [何时触发]

## Instructions
### Step 1：[动作]
### Step 2：[动作]
### Step 3：[动作]

## Examples
### 输入
### 输出

## Edge cases
```

### 约束型正文模板

```markdown
## ⚠️ 核心强制要求
### [原则 1 名称]
- [底线规则]

### [原则 2 名称]
- [底线规则]

## AI Agent 行为要求
### [场景 1]
| 场景 | 正确做法 | 错误做法 |
### [场景 2]

## 判断标准
- [如何判断是否违反]

## 反模式（必须避免）
- [具体的错误行为]
```

---

## 渐进式披露的差异

| 维度 | 动作型 | 约束型 |
|------|--------|--------|
| SKILL.md 核心内容 | 触发条件 + 关键步骤 | 核心原则 + 行为要求 |
| references 下沉内容 | 详细流程、工具用法、模板 | 判断标准细则、场景示例、理论背景 |
| 加载策略 | 触发时加载，按需读 references | 理想状态为始终加载核心原则 |
