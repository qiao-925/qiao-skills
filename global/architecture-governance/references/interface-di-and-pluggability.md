# 接口契约、依赖注入与可插拔设计

## 1. 接口契约

- 使用 `Protocol` 或 `ABC` 定义能力边界
- 契约优先表达行为，不泄露具体实现细节
- 契约变更默认要求向后兼容

---

## 2. 依赖注入

### 推荐方式

- 构造函数注入（首选）
- 工厂注入（创建时组装）

### 禁止方式

- 业务代码直接 new 具体底层实现并长期耦合
- 全局静态单例作为唯一依赖来源

---

## 3. 可插拔设计

- 可替换能力通过工厂或注册表管理
- 具体实现通过配置切换，不通过修改调用方逻辑切换
- 插件扩展时保持主流程与扩展点解耦

---

## 4. 最小检查清单

- [ ] 调用方依赖的是契约而非实现
- [ ] 依赖通过注入组装
- [ ] 新实现接入不需要修改主流程代码

