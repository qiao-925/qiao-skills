# MCP 调用规则（文档驱动场景）

## 目标

- 为文档驱动开发提供 MCP 服务的选择与调用规范，控制查询粒度、速率与输出格式，保证可追溯与安全。

---

## 推荐工具映射

- **Context7（优先）**：查询 SDK/API/框架官方文档、参数定义、示例片段。
- **DuckDuckGo（补充）**：查询最新官方公告、入口页面、版本发布信息。
- **Sequential Thinking（可选）**：在信息复杂时做检索/验证计划分解。

说明：本 skill 聚焦文档查阅与 API 验证，不要求绑定特定代码编辑类 MCP 工具。

---

## 全局策略

- 工具选择：根据任务意图选择最匹配的 MCP 服务，避免无意义并发调用。
- 结果可靠性：默认返回精简要点 + 必要来源，标注时间与局限。
- 单轮单工具：每轮最多调用一种外部服务；确需多种时串行并说明理由。
- 最小必要：收敛查询范围（tokens/结果数/时间窗/关键词），避免过度抓取与噪声。
- 可追溯性：在答复末尾追加“工具调用简报”（工具、输入摘要、参数、时间、来源/重试）。
- 安全合规：默认离线优先；外呼须遵守 robots/ToS 与隐私要求。
- 降级优先：失败按“失败与降级”执行，无法外呼时提供本地保守答案并标注不确定性。

---

## 速率与并发限制

- 若收到 429/限流提示：退避 20 秒，降低结果数/范围后重试。
- 避免并发多源抓取；优先单源验证后再扩展。

---

## 安全与权限边界

- 不上传敏感信息（密钥、凭证、个人隐私、内部未公开数据）。
- 遵循只读网络访问与最小授权原则。
- 遵守站点 robots 与 ToS，不规避访问限制。

---

## 失败与降级

- 首选服务失败时，按优先级尝试替代服务。
- 无法完成外呼时，明确告知降级状态与不确定性来源。
- 对关键结论给出“需人工复核”的提示与建议复核路径。

---

## 工具调用简报模板

```text
工具调用简报
- 工具：Context7
- 触发原因：核对某库 API 参数定义
- 输入摘要：{库名} + {方法名} + {版本}
- 关键参数：tokens=3000, topic=...
- 结果概览：命中文档章节与关键参数说明
- 时间：2026-02-08
- 来源/重试：官方文档 URL；重试 0 次
```

