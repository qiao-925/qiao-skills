# ROI评估框架

## 1. ROI计算公式

```
ROI = 影响范围 × 实现成本（倒数）
```

**影响范围越大、实现成本越低，ROI越高**

## 2. 影响范围评估

### 2.1 用户价值

| 维度 | 描述 | 评分 |
|------|------|------|
| 用户覆盖 | 影响多少用户 | 1-5分 |
| 使用频率 | 多久使用一次 | 1-5分 |
| 核心程度 | 是否核心功能 | 1-5分 |
| 体验提升 | 体验改善程度 | 1-5分 |

**用户价值总分** = (用户覆盖 + 使用频率 + 核心程度 + 体验提升) / 4

### 2.2 技术价值

| 维度 | 描述 | 评分 |
|------|------|------|
| 架构改善 | 是否改善架构 | 1-5分 |
| 可维护性 | 是否提升可维护性 | 1-5分 |
| 性能提升 | 是否提升性能 | 1-5分 |
| 扩展性 | 是否提升扩展性 | 1-5分 |

**技术价值总分** = (架构改善 + 可维护性 + 性能提升 + 扩展性) / 4

### 2.3 维护价值

| 维度 | 描述 | 评分 |
|------|------|------|
| 技术债务 | 是否减少技术债务 | 1-5分 |
| 稳定性 | 是否提升稳定性 | 1-5分 |
| 可观测性 | 是否提升可观测性 | 1-5分 |
| 文档完善 | 是否完善文档 | 1-5分 |

**维护价值总分** = (技术债务 + 稳定性 + 可观测性 + 文档完善) / 4

### 2.4 综合影响范围

```
影响范围 = (用户价值 × 0.5) + (技术价值 × 0.3) + (维护价值 × 0.2)
```

**权重可根据项目类型调整**：
- 面向用户的产品：用户价值权重更高
- 技术工具/框架：技术价值权重更高
- 长期维护项目：维护价值权重更高

## 3. 实现成本评估

### 3.1 开发时间

| 时间范围 | 评分 | 描述 |
|---------|------|------|
| < 1天 | 1分 | 非常低 |
| 1-3天 | 2分 | 低 |
| 3-7天 | 3分 | 中 |
| 1-2周 | 4分 | 高 |
| > 2周 | 5分 | 非常高 |

### 3.2 技术复杂度

| 复杂度 | 评分 | 描述 |
|--------|------|------|
| 简单 | 1分 | 直接实现，无技术难点 |
| 中等 | 2-3分 | 需要一些设计，有已知方案 |
| 复杂 | 4分 | 需要深入设计，可能有技术风险 |
| 非常复杂 | 5分 | 需要研究，有较大技术风险 |

### 3.3 依赖关系

| 依赖 | 评分 | 描述 |
|------|------|------|
| 无依赖 | 1分 | 独立实现 |
| 少量依赖 | 2分 | 依赖1-2个模块 |
| 中等依赖 | 3分 | 依赖多个模块 |
| 大量依赖 | 4-5分 | 依赖核心模块或外部系统 |

### 3.4 综合实现成本

```
实现成本 = (开发时间 + 技术复杂度 + 依赖关系) / 3
```

**成本越低，ROI越高**（使用倒数）

## 4. ROI计算示例

### 示例1：多轮对话上下文

**影响范围**：
- 用户价值：4.5（用户覆盖5、使用频率5、核心程度4、体验提升4）
- 技术价值：3.0（架构改善3、可维护性3、性能提升3、扩展性3）
- 维护价值：2.5（技术债务2、稳定性3、可观测性2、文档完善3）
- **综合影响范围** = 4.5×0.5 + 3.0×0.3 + 2.5×0.2 = **3.65**

**实现成本**：
- 开发时间：3分（3-7天）
- 技术复杂度：3分（需要会话管理设计）
- 依赖关系：2分（依赖会话存储）
- **综合实现成本** = (3+3+2)/3 = **2.67**

**ROI** = 3.65 × (1/2.67) = **1.37** → ⭐⭐⭐⭐

### 示例2：文档预览与高亮

**影响范围**：
- 用户价值：4.0
- 技术价值：2.0
- 维护价值：1.5
- **综合影响范围** = 3.15

**实现成本**：
- 开发时间：1分（<1天）
- 技术复杂度：1分（简单前端展示）
- 依赖关系：1分（无依赖）
- **综合实现成本** = 1.0

**ROI** = 3.15 × (1/1.0) = **3.15** → ⭐⭐⭐⭐⭐

## 5. 优先级划分

### 5.1 基于ROI

| ROI范围 | 优先级 | 描述 |
|---------|--------|------|
| > 2.0 | P0 | 必须优先实现 |
| 1.0 - 2.0 | P1 | 高优先级 |
| 0.5 - 1.0 | P2 | 中优先级 |
| < 0.5 | P3 | 低优先级 |

### 5.2 特殊情况

即使ROI较低，以下情况也应提高优先级：
- **阻塞性问题**：影响核心功能
- **技术债务**：长期不处理会累积成本
- **用户强烈需求**：用户明确要求

## 6. 输出格式

```
功能名 - ROI: ⭐⭐⭐⭐⭐ (3.15)
- 影响范围：3.15（用户价值4.0、技术价值2.0、维护价值1.5）
- 实现成本：1.0（开发时间1天、复杂度低、无依赖）
- 优先级：P0
```
