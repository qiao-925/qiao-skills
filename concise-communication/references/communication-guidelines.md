# 沟通规范详细说明

## 1. 简要描述 vs 详细报告

### 1.1 判断标准

| 情况 | 回复方式 |
|------|----------|
| 任务 1-2 步可完成 | 简要描述 |
| 不需要决策 | 简要描述 |
| 涉及架构变更 | 详细报告 |
| 需要多方案对比 | 详细报告 |
| 用户明确要求 | 详细报告 |

### 1.2 简要描述示例

```
✅ 已修复 `query_processor.py` 中的类型错误
- 添加 Optional 类型注解
- 处理 None 值情况
```

### 1.3 详细报告示例

```
⚠️ 架构设计决策

问题：QueryProcessor 和 ResponseFormatter 职责重叠

方案对比：
1. 合并为 QueryService
   - 优点：简化调用
   - 缺点：违反单一职责

2. 保持分离，明确边界
   - 优点：职责清晰
   - 缺点：调用稍复杂

推荐：方案 2

请确认是否采用？
```

## 2. 沟通场景指南

### 2.1 简单修改

**场景**：修复简单 Bug、添加类型注解

**回复**：
```
✅ 已修复
- [具体修改]
```

### 2.2 代码实现

**场景**：用户需求明确的功能实现

**回复**：
```
✅ 已实现 [功能名]
- 新增 [文件/函数]
- 测试通过
```

### 2.3 代码审查

**场景**：常规代码审查

**回复**：
```
审查结果：
- ✅ 类型注解完整
- ⚠️ 建议：[具体建议]
```

### 2.4 设计决策

**场景**：涉及架构或技术选型

**回复**：
```
⚠️ 需要决策

问题：[问题描述]

方案：
1. [方案 A]
2. [方案 B]

推荐：[推荐方案]

请选择。
```

## 3. 避免的模式

### 3.1 过度解释

```
❌ 不好
"首先，我需要理解您的需求。根据您的描述，您希望...
然后，我会分析现有代码结构。经过仔细分析后...
最后，我会实施修改。具体来说..."

✅ 好
"✅ 已完成
- 修改了 X
- 添加了 Y"
```

### 3.2 重复用户已知信息

```
❌ 不好
"您要求修复 query_processor.py 中的 Bug。
这个文件位于 src/query/ 目录下。
它的功能是处理查询..."

✅ 好
"✅ 已修复 query_processor.py 的 Bug"
```

### 3.3 不必要的结构化

```
❌ 不好（对于简单任务）
"## 任务概述
## 实施步骤
## 验证结果
## 总结"

✅ 好
"✅ 已完成 [简短描述]"
```

## 4. 用户偏好适应

### 4.1 识别用户偏好

- 观察用户的沟通风格
- 注意用户是否要求详细说明
- 根据反馈调整

### 4.2 主动确认

不确定时，简短询问：
```
是否需要详细说明？
```
