---
name: whetstone
description: 把「原文 + 读者批注」整理成「编号批注 + 对应原文」的结构化笔记，并产出 AI 总结。人写批注，技能负责编号、对应、格式与总结。触发：批注式整理 / 磨刀石模式 / 二创式整理 / 批注式阅读与整理，或 /whetstone。
---

## 理念（执行时理解「为什么」）

- **磨刀石比喻**：输入（原文/案例）是磨刀石，阅读时的火花即批注；不追求「读完」，追求「有火花处就停笔」。
- **人机分工**：批注来自人（读者书写，保留原话、仅做必要润色）；本技能在已有「原文 + 批注」前提下，负责编号、对应原文、格式、「AI 总结分析」与文末贴「原文」。

---

## Instructions（分步说明）

1. **确认输入**  
   若缺少原文或批注，向用户索要：「请提供原文（或链接 + 正文）以及你的批注（批注为人类的笔记，可注明每条对应的原文位置）。」

2. **解析批注与对应关系**  
   - 若用户已标明某条批注对应某段原文，按用户标注关联。  
   - 若未标明，根据批注内容与原文做合理匹配；若无法匹配则「对应原文」可写「见全文」或摘一句最相关句。

3. **生成结构化文档**  
   - **标题格式**（文档主标题或建议文件名）：`[YYYY-MM-DD] [Emoji] 主题：副标题`。无 `#`，主副标题统一用中文冒号 `：`（不用 `——`、`-`）。  
   - **文件名兼容 Windows**：文件名中不得出现 ASCII 双引号 `"`；若标题含引号内容，用直角引号「」代替（如 `"生命没有迭代机会"` → `「生命没有迭代机会」`）。成对替换：第 1 个 `"` → `「`，第 2 个 `"` → `」`，依此类推。  
   - 按「批注编号第一」生成：`## 1. …`、`> 批注`、对应原文内容（无须「**对应原文**」前缀）；批注尽量保留用户原话，仅做必要润色（错字、标点）。  
   - 序号统一为 1. 2. 3. …

4. **AI 总结分析**  
   根据批注与原文增加「AI 总结分析」小节：对批注要点与原文关系做简短总结或分析，便于复读与再勾连。

5. **文末贴原文**  
   在文档末尾增加「原文」小节，仅保留来源、标题、作者三项（放在该小节最上），正文不贴。

6. **可选**  
   在文档中注明「人类的笔记」「批注编号第一」或磨刀石比喻一句（如：「本工作流强调：批注为阅读时的火花（磨刀石比喻），整理仅为结构化与沉淀；产出是人类笔记，便于后续再勾连与二创。」）。

---

## Examples（输入/输出示例）

**输入**：用户提供一段原文 + 若干条批注（可带或不带与原文的对应关系）。

**文档标题**（或建议文件名）：`[YYYY-MM-DD] [Emoji] 主题：副标题`，无 #，统一用 `：`。

**单条输出格式**：

```markdown
## 1. [简短主题/关键词]

> [批注原文，尽量保留用户原话]

[与该条批注对应的原文摘要或关键句，无须「**对应原文**」前缀]
```

整篇以批注为纲，先编号再逐条展开；每条均为「批注 + 对应原文」。文末须含「AI 总结分析」小节与「原文」小节（原文小节仅保留来源、标题、作者）。

---

## Edge cases（常见边界情况）

- **缺少原文或批注**：不猜测、不编造，向用户索要完整输入后再执行。
- **批注未标明对应原文**：根据内容做合理匹配；无法匹配时「对应原文」写「见全文」或摘一句最相关句。
- **批注与原文混在一起**：先解析出「批注」与「原文」两类内容，再按约定整理；若难以区分，可向用户确认。
- **用户要求 AI 代写批注**：本技能假定批注为人所写；若用户希望 AI 生成批注，需另行说明并区分「人写批注整理」与「AI 生成批注」两种任务。
- **建议文件名含引号**：为 Windows 兼容，一律用「」替代 `"`；成对替换（奇数次 `"`→`「`，偶数次 `"`→`」`）。
